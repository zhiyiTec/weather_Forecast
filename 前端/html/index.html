<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!doctype html>
<html>

<head>
    <title>Slide Weather Widget Responsive Widget Template :: w3layouts</title>
    <!-- for-mobile-apps -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Slide Weather Widget Responsive, Login form web template, Sign up Web Templates, Flat Web Templates, Login signup Responsive web template, Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design"
    />
    <!-- //for-mobile-apps -->
    <link href="//fonts.googleapis.com/css?family=Josefin+Sans:100,100i,300,300i,400,400i,600,600i,700,700i" rel="stylesheet">
    <link href='//fonts.googleapis.com/css?family=Roboto+Condensed:400,700italic,700,400italic,300italic,300' rel='stylesheet' type='text/css'>
    <!-- font-awesome icons -->
    <link href="css/font-awesome.css" rel="stylesheet">
    <!-- //font-awesome icons -->
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
    <script src="js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript">
        $(function() {

            $('.hub-slider-slides ul').hubSlider({
                selector: $('li'),
                button: {
                    next: $('.hub-slider-arrow_next'),
                    prev: $('.hub-slider-arrow_prev')
                },
                transition: '0.7s',
                startOffset: 30,
                auto: true,
                time: 5 // secondly
            });
        })
    </script>
    <!--skycons-icons-->
    <script src="js/skycons.js"></script>
    <!--//skycons-icons-->

</head>

<body>
    <div class="content" id="Main-Content">
        <h1><span style="font-family:STXingkai">致一天气</span></h1>
        <div class="w3ls-slider">
            <div class="hub-slider">
                <div class="hub-slider-slides">
                    <ul>
                        <li>
                            <div class="w3layouts-info w3layouts-info3">
                                <div class="w3layouts-info-top">
                                    <h3><span id="1DayTempture">22°c<span></h3>
                                    <h4><span id="1DayWeatherCondition">Sunny</span></h4>
                                        <p>江苏南京</p>
                                </div>
                                <canvas id="partly-cloudy-day" width="40" height="40"></canvas>
                                <div class="w3layouts-info-bottom">
                                    <h5><span id="1DayDate">September 24 , 2017</span></h5>
                                    <p><span id="1week"></span></p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="w3layouts-info w3layouts-info2">
                                <div class="w3layouts-info-top">
                                    <h3><span id="2DayTempture">20°c</span></h3>
                                    <h4><span id="2DayWeatherCondition">Cloudy</span></h4>
                                    <p>江苏南京</p>
                                </div>
                                <canvas id="cloudy" width="40" height="40"></canvas>
                                <div class="w3layouts-info-bottom">
                                    <h5><span id="2DayDate">September 25 , 2017</span></h5>
                                    <p><span id="2week"></span></p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="w3layouts-info">
                                <div class="w3layouts-info-top">
                                    <h3><span id="3DayTempture">17°c</span></h3>
                                    <h4><span id="3DayWeatherCondition">Rainy</span></h4>
                                    <p>江苏南京</p>
                                </div>
                                <canvas id="rain" width="40" height="40"></canvas>
                                <div class="w3layouts-info-bottom">
                                    <h5><span id="3DayDate">September 25 , 2017</span></h5>
                                    <p><span id="3week"></span></p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="w3layouts-info w3layouts-info1">
                                <div class="w3layouts-info-top">
                                    <h3><span id="4DayTempture">-5°c</span></h3>
                                    <h4><span id="4DayWeatherCondition">Snowy</span></h4>
                                    <p>江苏南京</p>
                                </div>
                                <canvas id="snow" width="40" height="40"></canvas>
                                <div class="w3layouts-info-bottom">
                                    <h5><span id="4DayDate">September 25 , 2017</span></h5>
                                    <p><span id="4week"></span></p>
                                </div>
                            </div>

                        </li>
                    </ul>
                </div>
                <div class="hub-slider-controls">
                    <button class="hub-slider-arrow hub-slider-arrow_next">↑</button>
                    <button class="hub-slider-arrow hub-slider-arrow_prev">↓</button>
                </div>
            </div>
        </div>
        <!-- copyright -->
        <div class="copyright">
            <p> © 2019 Slide Weather Widget . All rights reserved | Design by <a href="http://w3layouts.com/" target="_blank">致一科技</a></p>
        </div>
        <!-- //copyright -->
        <script>
            var icons = new Skycons({
                    "color": "#FFD700"
                }),
                list = [
                    "clear-day"
                ],
                i;

            for (i = list.length; i--;)
                icons.set(list[i], list[i]);

            icons.play();
        </script>
        <script>
            var icons = new Skycons({
                    "color": "#f5f5f5"
                }),
                list = [
                    "clear-night", "partly-cloudy-day",
                    "partly-cloudy-night", "cloudy", "rain", "sleet", "snow", "wind",
                    "fog"
                ],
                i;

            for (i = list.length; i--;)
                icons.set(list[i], list[i]);

            icons.play();
        </script>
        <script type="text/javascript" src="js/hubslider.js"></script>
    </div>
    <script>
        var cityName = "南京";
        var temptureArr = new Array(); //用于存储天气温度
        var weatherConditionArr = new Array(); //用于存储天气状况
        var dateArry = new Array(); //用于存储查询的年月日
        var weexArry = new Array(); //用于存储查询的星期几
        $.ajax({
            url: "http://localhost:12305/zhiyi/getWeather",
            type: "get",
            data: "cityName=" + cityName,
            success: function(data) {
                temptAr = [];
                weatherConditionArr = [];
                $.each(data.weathers, function(index, item) {
                        var getDay = item.weatherDate.substring(0, 2);
                        if (judgeSafeData(getDay)) {
                            temptureArr.push(item.weatherTempture);
                            weatherConditionArr.push(item.weatherCondition)
                        }
                    }),
                    //将温度添加到界面
                    addWeatherToPage(temptureArr, "DayTempture");
                //将天气状态添加到界面
                addWeatherToPage(weatherConditionArr, "DayWeatherCondition");
                dateArry = [];
                weexArry = [];
                //将日期存到数组中
                getData(dateArry, weexArry);
                //将日期状态添加到界面
                addWeatherToPage(dateArry, "DayDate");
                //将星期几添加到界面
                addWeatherToPage(weexArry, "week");
            },
            error: function() {
                alert("天气资源获取失败")
            }
        });

        //用于判断日期是否合法
        function judgeSafeData(getDay) {
            var myDate = new Date();
            var today = myDate.getDate();
            var LargeData = today + 4;
            if (today <= getDay && LargeData > getDay) {
                return true;
            } else {
                return false
            };
        }
        //用于将天气添加至页面
        function addWeatherToPage(arry, signal) {
            $.each(arry, function(index, item) {
                var nu = index + 1;
                $("#" + nu + signal).text("");
                $("#" + nu + signal).text(arry[index]);
            })
        }

        //用于获取当前的年月日，并将日期添加至对应的界面
        function getData(arry, arry1) {
            // 获取当前日期
            var date = new Date();
            for (var i = 0; i < 4; i++) {
                console.log("------------------------");
                //获取当前的年份
                var nowYear = date.getFullYear();
                //console.log("年份=" + nowYear);
                // 获取当前月份
                var nowMonth = date.getMonth() + 1;
                //console.log("月份=" + nowMonth);
                // 获取当前是几号
                var strDate = date.getDate() + i;
                if (nowMonth == 1 || nowMonth == 3 || nowMonth == 5 || nowMonth == 7 || nowMonth == 8 || nowMonth == 10 || nowMonth == 12) {
                    if (strDate > 31) {
                        nowMonth += 1;
                    }
                } else if (nowMonth == 2 && nowYear % 4 == 0) {
                    if (strDate > 28) {
                        nowMonth += 1;
                    }
                } else if (nowMonth == 2 && nowYear % 4 != 0) {
                    if (strDate > 27) {
                        nowMonth += 1;
                    }
                } else {
                    if (strDate > 30) {
                        nowMonth += 1;
                    }
                }
                //console.log("日期=" + strDate);

                // 添加分隔符“-”
                var seperator = "-";
                // 对月份进行处理，1-9月在前面添加一个“0”
                if (nowMonth >= 1 && nowMonth <= 9) {
                    nowMonth = "0" + nowMonth;
                }
                // 最后拼接字符串，得到一个格式为(yyyy-MM-dd)的日期
                var nowDate = nowYear + seperator + nowMonth + seperator + strDate;
                // console.log(nowDate);
                arry.push(nowDate);
                var nowWeex = date.getDay() + i; //获取星期几，注:0-6对应为星期日到星期六 
                if (nowWeex > 6) {
                    nowWeex %= 7;
                }
                var xingqi;
                switch (nowWeex) {
                    case 0:
                        xingqi = "星期日";
                        break;
                    case 1:
                        xingqi = "星期一";
                        break;
                    case 2:
                        xingqi = "星期二";
                        break;
                    case 3:
                        xingqi = "星期三";
                        break;
                    case 4:
                        xingqi = "星期四";
                        break;
                    case 5:
                        xingqi = "星期五";
                        break;
                    case 6:
                        xingqi = "星期六";
                        break;
                    default:
                        xingqi = "系统错误！"
                }
                arry1.push(xingqi);

            }
        }
    </script>
</body>

</html>